<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultimate Adventure Game - Phaser Edition</title>
<link rel="stylesheet" href="style.css">
<!-- Lis√§t√§√§n Phaser-kirjasto CDN:st√§ -->
<script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
</head>
<body>
<div id="canvasWrapper">
  <!-- Phaser luo canvas-elementin t√§h√§n diviin -->
  <div id="gameContainer"></div>
  <!-- Overlay-kerrokset: vignette ja animoidut pilvet -->
  <div id="canvasOverlay">
    <div id="clouds" aria-hidden="true"></div>
    <div id="vignette" aria-hidden="true"></div>
  </div>
</div>
<div id="ui">
  <div id="health">El√§m√§t: 4</div>
  <div id="coins">Kolikot: 0</div>
  <div id="settingsBtn">‚öôÔ∏è</div>
  <div id="backpackBtn" title="Reppu (E)">üéí</div>
</div>

<div id="settingsMenu" class="hidden">
  <label><input type="checkbox" id="toggleFly"> Salli lent√§minen</label><br>
  <label><input type="checkbox" id="showHearts" checked> N√§yt√§ syd√§met</label><br>
  <label><input type="checkbox" id="toggleBoots"> Pomppukeng√§t (on/off)</label><br>
  <strong>√Ñ√§net</strong><br>
  <label><input type="checkbox" id="sfxMute"> Mykist√§ √§√§net</label><br>
  <label>Efektien voimakkuus: <input type="range" id="sfxVol" min="0" max="1" step="0.01" value="0.8"></label>
  <label>Ty√∂kalu: <select id="toolSelect"></select></label>
  <hr>
  <strong>Mopo</strong><br>
  <label>V√§ri: <input type="color" id="mopedColor" value="#ff6a00"></label><br>
  <label>Tarra: 
    <select id="mopedDecal">
      <option value="none">Ei tarraa</option>
      <option value="pistol">Pistooli</option>
      <option value="skull">P√§√§kallo</option>
      <option value="triangle">Kolmio</option>
      <option value="square">Neli√∂</option>
    </select>
  </label>
  <hr>
  <strong>Hahmon ulkoasu</strong><br>
  <label>Paita: <input type="color" id="shirtColor" value="#4477ff"></label><br>
  <label>Housut: <input type="color" id="pantsColor" value="#333333"></label><br>
  <label><input type="checkbox" id="eyesGlow"> Hohtavat silm√§t</label><br>
  <label>Silmien v√§ri: <input type="color" id="eyeColor" value="#ffffff"></label><br>
  <label>Hiusten v√§ri: <input type="color" id="hairColor" value="#222222"></label>
  <hr>
  <strong>Ninja-tila</strong><br>
  <label><input type="checkbox" id="ninjaEnable"> Ninja k√§yt√∂ss√§ (J: p√§√§lle/pois)</label><br>
  <div id="ninjaRows">
    <label>Miekan taso: 
      <select id="ninjaSword">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
      </select>
    </label>
    <label>Heittoveitsi: 
      <select id="ninjaKnife">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
      </select>
    </label>
    <label>Hyppyisku: 
      <select id="ninjaStrike">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
      </select>
    </label>
  </div>
  <label id="ninjaSwordRangeRow" style="display:none">Miekan et√§isyys (palikkaa): 
    <input type="number" id="ninjaSwordRange" min="1" max="6" step="1" value="2">
  </label>
  <hr>
  <strong>Kauppias (asetuksista)</strong>
  <div class="merchant-inline">
    <div>30 puublokkia ‚Äî 5 kolikkoa</div>
    <button id="buyWood2">Osta</button>
    <div style="margin-top:6px">Ty√∂kalut</div>
    <div>Puuhakku ‚Äî 2 kolikkoa</div>
    <button id="buyPickWood2">Osta puuhakku</button>
    <div>Kivihakku ‚Äî 4 kolikkoa</div>
    <button id="buyPickStone2">Osta kivihakku</button>
    <div>Rautahakku ‚Äî 6 kolikkoa</div>
    <button id="buyPickIron2">Osta rautahakku</button>
    <div style="margin-top:6px">Pistooli ‚Äî 10 kolikkoa</div>
    <button id="buyPistol2">Osta pistooli</button>
    <div style="margin-top:6px">Asut</div>
    <div>Tavallinen asu ‚Äî 3 kolikkoa</div>
    <button id="buyOutfitNormal2">Osta tavallinen</button>
    <div>Erikoisasu (reppu) ‚Äî 7 kolikkoa</div>
    <button id="buyOutfitSpecial2">Osta erikoisasu</button>
  <div style="margin-top:6px">Pomppukeng√§t ‚Äî 8 kolikkoa</div>
  <button id="buyBoots2">Osta pomppukeng√§t</button>
  </div>

  <hr>
  <strong>Maailmat</strong>
  <div class="worlds-inline">
    <label>Maailma: <select id="worldSelect"></select></label>
    <button id="createWorld">Uusi maailma</button>
    <button id="deleteWorld">Poista</button>
  </div>
</div>

<div id="inventory">
  <!-- 6 slotin inventaario -->
  <div class="slot" data-index="0"></div>
  <div class="slot" data-index="1"></div>
  <div class="slot" data-index="2"></div>
  <div class="slot" data-index="3"></div>
  <div class="slot" data-index="4"></div>
  <div class="slot" data-index="5"></div>
</div>

<!-- Mobiiliohjaimet: n√§ytet√§√§n vain kosketuslaitteilla -->
<div id="touchControls" aria-label="Mobiiliohjaimet">
  <div class="tc-left">
    <button id="btnLeft" class="tc-btn" aria-label="Vasen">‚óÄ</button>
    <button id="btnRight" class="tc-btn" aria-label="Oikea">‚ñ∂</button>
  </div>
  <div class="tc-right">
    <button id="btnJump" class="tc-btn primary" aria-label="Hyppy">‚§í</button>
    <button id="btnPlaceToggle" class="tc-btn" aria-label="Aseta lankku">Aseta</button>
  </div>
  <div class="tc-hint">Napauta pelialuetta louhiaksesi/ammuaksesi</div>
  <div class="tc-mode" id="placeModeBadge">Asetustila</div>
  
</div>

<!-- Simppeli kauppias-ikkuna -->
<div id="merchant" class="hidden">
  <div class="merchant-box">
    <h3>Kauppias</h3>
    <div>30 puublokkia &mdash; 5 kolikkoa</div>
    <iv id="buyWood">Osta</iv>Ty√∂kalut</iv>
    <div>Puuhakku &mdash; 2 kolikkoa</div>
    <button id="buyPickWood">Osta puuhakku</button>
    <div>Kivihakku &mdash; 4 kolikkoa</div>
    <button id="buyPickStone">Osta kivihakku</button>
    <div>Rautahakku &mdash; 6 kolikkoa</div>
    <button id="buyPickIron">Osta rautahakku</button>
    <div>Pistooli &mdash; 10 kolikkoa</div>
    <button id="buyPistol">Osta pistooli</button>
    <hr>
    <div>Asut</div>
    <div>Tavallinen asu &mdash; 3 kolikkoa</div>
    <button id="buyOutfitNormal">Osta tavallinen</button>
    <div>Erikoisasu (reppu) &mdash; 7 kolikkoa</div>
    <button id="buyOutfitSpecial">Osta erikoisasu</button>
  <div>Pomppukeng√§t &mdash; 8 kolikkoa</div>
  <button id="buyBoots">Osta pomppukeng√§t</button>
    <br>
    <small>Vinkit: 1-5 vaihda ty√∂kaluja, Q kierr√§t√§.</small>
    <br>
    <button id="closeMerchant">Sulje</button>
  </div>
</div>

<!-- √Ñ√§nielementit poistettu -->
<!-- 8-bit SFX engine -->
<script src="sfx.js"></script>
<script src="game.js"></script>

<!-- Aloitusruutu -->
<div id="startScreen" class="overlay">
  <div class="panel">
    <h1>Ultimate Adventure</h1>
    <p>Liiku: A/D tai nuolin√§pp√§imet ‚Ä¢ Hyppy: W/‚Üë/Space ‚Ä¢ Klikkaa louhi/ammu ‚Ä¢ Oikea klikkaus asettaa lankun ‚Ä¢ 1‚Äì9/Q ty√∂kalut ‚Ä¢ E avaa kauppiaan kun l√§hell√§</p>
    <div class="actions">
      <button id="btnStart">Aloita peli</button>
      <button id="btnStartSettings">Asetukset</button>
    </div>
  </div>
  
</div>

<!-- Paussivalikko -->
<div id="pauseScreen" class="overlay hidden">
  <div class="panel">
    <h3>Peli on tauolla</h3>
    <div class="actions">
      <button id="btnResume">Jatka</button>
      <button id="btnRestart">Aloita alusta</button>
      <button id="btnPauseSettings">Asetukset</button>
      <!-- Minigames -->
      <button id="btnMiniMurder">Minipeli: Murhaajajahti</button>
      <button id="btnMiniParkour">Minipeli: Parkour-kisa</button>
  <button id="btnMiniDesert">Minipeli: Aavikkovaellus</button>
    </div>
    <small>Vinkki: Esc = tauko/jatka</small>
  </div>
  
</div>

<!-- Reppu-paneeli -->
<div id="backpackPanel" class="hidden">
  <div class="bp-box">
    <h3>Reppu</h3>
    <div class="bp-slots">
      <div class="bp-slot" data-i="0"><span class="bp-name">Tyhj√§</span><span class="bp-count"></span></div>
      <div class="bp-slot" data-i="1"><span class="bp-name">Tyhj√§</span><span class="bp-count"></span></div>
      <div class="bp-slot" data-i="2"><span class="bp-name">Tyhj√§</span><span class="bp-count"></span></div>
    </div>
    <div class="bp-actions">
      <button id="bpDump">Tyhjenn√§ reppu inventaarioon</button>
      <button id="bpClose">Sulje</button>
    </div>
  </div>
  
</div>
<script>
  // Simple UI SFX: menu button clicks
  const resumeAndClick = (name)=>{ try{ window.Sfx?.resume(); }catch(e){} try{ window.playSfx?.(name||'menu'); }catch(e){} };
  document.getElementById('btnStart')?.addEventListener('click', ()=> resumeAndClick('menu'));
  document.getElementById('btnStartSettings')?.addEventListener('click', ()=> resumeAndClick('menu'));
  document.getElementById('btnResume')?.addEventListener('click', ()=> resumeAndClick('menu'));
  document.getElementById('btnRestart')?.addEventListener('click', ()=> resumeAndClick('menu'));
  document.getElementById('btnPauseSettings')?.addEventListener('click', ()=> resumeAndClick('menu'));
  document.getElementById('bpClose')?.addEventListener('click', ()=> resumeAndClick('menu'));
  document.getElementById('bpDump')?.addEventListener('click', ()=> resumeAndClick('menu'));
  document.getElementById('btnMiniMurder')?.addEventListener('click', ()=> resumeAndClick('menu'));
  document.getElementById('btnMiniParkour')?.addEventListener('click', ()=> resumeAndClick('menu'));
  document.getElementById('btnMiniDesert')?.addEventListener('click', ()=> resumeAndClick('menu'));
</script>
</body>
</html>
